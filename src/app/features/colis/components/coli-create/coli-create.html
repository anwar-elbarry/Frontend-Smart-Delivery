<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl mx-auto">
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
      <!-- Header -->
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 px-8 py-6">
        <h2 class="text-3xl font-bold text-white flex items-center">
          <i class="fa-solid fa-box-open mr-3"></i>
          Créer un Nouveau Colis
        </h2>
        <p class="text-indigo-100 mt-2">Remplissez les informations du colis</p>
      </div>

      <!-- Form -->
      <form (ngSubmit)="submit()" #form="ngForm" class="px-8 py-6 space-y-6">
        @if (errorMessage()) {
          <div class="bg-red-50 border border-red-200 rounded-lg p-3">
            <p class="text-red-800 text-sm">{{ errorMessage() }}</p>
          </div>
        }

        @if (successMessage()) {
          <div class="bg-green-50 border border-green-200 rounded-lg p-3">
            <p class="text-green-800 text-sm">{{ successMessage() }}</p>
          </div>
        }

        <!-- Poids -->
        <div>
          <label for="poids" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-weight-hanging text-indigo-600 mr-2"></i>
            Poids (kg)
            <span class="text-red-500 ml-1">*</span>
          </label>
          <input
            type="number"
            id="poids"
            name="poids"
            [(ngModel)]="formData.poids"
            required
            placeholder="Ex: 2.5"
            step="0.01"
            min="0"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400">
        </div>

        <!-- Ville Destination -->
        <div>
          <label for="villeDestination" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-location-dot text-indigo-600 mr-2"></i>
            Ville de Destination
            <span class="text-red-500 ml-1">*</span>
          </label>
          <input
            type="text"
            id="villeDestination"
            name="villeDestination"
            [(ngModel)]="formData.villeDestination"
            required
            placeholder="Ex: Casablanca"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400">
        </div>

        <!-- Priorité -->
        <div>
          <label for="priorite" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-flag text-indigo-600 mr-2"></i>
            Priorité
            <span class="text-red-500 ml-1">*</span>
          </label>
          <select
            id="priorite"
            name="priorite"
            [(ngModel)]="formData.priorite"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400 bg-white cursor-pointer">
            @for (priority of priorities; track priority.value) {
              <option [value]="priority.value">{{ priority.label }}</option>
            }
          </select>
        </div>

        <!-- Zone -->
        <div>
          <label for="zoneId" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-map-marked-alt text-indigo-600 mr-2"></i>
            Zone
          </label>
          <select
            id="zoneId"
            name="zoneId"
            [(ngModel)]="formData.zoneId"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400 bg-white cursor-pointer">
            <option [ngValue]="null">Sélectionner une zone (optionnel)</option>
            @for (zone of availableZones(); track zone.id) {
              <option [value]="zone.id">{{ zone.nome }} (Code Postal: {{ zone.codePostal }})</option>
            }
          </select>
        </div>

        <!-- Client Expéditeur -->
        <div>
          <label for="clientExpediteurId" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-user-tie text-indigo-600 mr-2"></i>
            Client Expéditeur
            <span class="text-red-500 ml-1">*</span>
          </label>
          <select
            id="clientExpediteurId"
            name="clientExpediteurId"
            [(ngModel)]="formData.clientExpediteurId"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400 bg-white cursor-pointer">
            <option value="">Sélectionner un client</option>
            @for (client of availableExpediteurs(); track client.id) {
              <option [value]="client.id">{{ client.prenom }} {{ client.nom }} ({{ client.email }})</option>
            }
          </select>
        </div>

        <!-- Destinataire -->
        <div>
          <label for="destinataireId" class="block text-sm font-semibold text-gray-700 mb-2">
            <i class="fa-solid fa-user-check text-indigo-600 mr-2"></i>
            Destinataire
          </label>
          <select
            id="destinataireId"
            name="destinataireId"
            [(ngModel)]="formData.destinataireId"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 hover:border-indigo-400 bg-white cursor-pointer">
            <option [ngValue]="null">Sélectionner un destinataire (optionnel)</option>
            @for (client of availableDestinataires(); track client.id) {
              <option [value]="client.id">{{ client.prenom }} {{ client.nom }} ({{ client.email }})</option>
            }
          </select>
        </div>

        <!-- Actions -->
        <div class="flex gap-4 pt-4 border-t border-gray-200">
          <button
            type="button"
            (click)="cancel()"
            [disabled]="isLoading()"
            class="flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition duration-200 font-semibold flex items-center justify-center shadow-sm hover:shadow disabled:opacity-50">
            <i class="fa-solid fa-times mr-2"></i>
            Annuler
          </button>
          <button
            type="submit"
            [disabled]="!form.valid || isLoading()"
            class="flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition duration-200 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed">
            @if (isLoading()) {
              <i class="fa-solid fa-spinner fa-spin mr-2"></i>
              Création...
            } @else {
              <i class="fa-solid fa-check mr-2"></i>
              Créer le Colis
            }
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
